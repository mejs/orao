:START ADDRESS: $1000

:LOOP:  JSR $E5B0 ; This is the main loop checking for text input. If button is not pressed, then the receive loop is active
	BEQ :REDIRECT: ; If button press is not detected, go to redirect which then goes to RECEIVE2 loop
	JSR :TYPING: ; If button is pressed, go to TYPING
:REDIRECT: JSR :RECEIVE2:
	LDA #$00
	STA $FA ; Clear button press
	LDA $E8
	CMP #$1F ; Check if ";" is pressed. If yes, go to REDIRECT2
	BEQ :REDIRECT2:
	JMP :LOOP: ; Go back to start of the main loop
:REDIRECT2:	JSR :LOOP6: ; go to LOOP6
:LOOP8:	LDA #$00
	LDA #$0C
	JSR $E762
	LDA #$00
	STA $FA
	LDA #$0B
	STA $B000
	JMP :LOOP:
:LOOP6: JSR $E5B0
	CMP #$0D
	BNE :LOOP7:
	JMP :LOOP8:
:LOOP7:	LDA #$0A
	STA $B000
	JMP :LOOP6:
:TYPING: CMP #$3B ; check if button pressed is enter
	BEQ :LOOP8: ; if button pressed is not enter, go to LOOP8
	JSR :LOOP9: ; if button pressed is enter, g to LOOP9
	RTS
:LOOP9: PHA
	LDA #$10
:LOOP10:BIT $A800 ; this is the typing and TX loop
	BEQ :LOOP10:
	PLA
	STA $A000
	JSR :DATA:
	RTS
:DATA:$5A ; This is the 65c51 bug hack
	$DA ;
:END DATA:
	LDY #$C0
:LOOP13:LDX #$68
:LOOP12:DEX
	BNE :LOOP12:
	DEY
	BNE :LOOP13:
:DATA1:
	$FA
	$7A
:END DATA1:
	RTS
:TYPING:JSR $E71C
	LDA #$FC
	BEQ :TYPING:
	JSR :LOOP9:
	JMP :TYPING:
:READ:  LDA #$08
:READ2:	BIT $A800
	BEQ :READ2:
	LDA $A000
	RTS
:RECEIVE:JSR :READ:
	JSR $FFF1
	JMP :RECEIVE:
:RECEIVE2:LDA #$08
	BIT $A800
	BNE :RECEIVE3:
	RTS
:RECEIVE3:LDA $A000
	JSR $FFF1
	RTS
:START ADDRESS: $10C0
:300:	PHA
	LDA #$00
	STA $A800
	LDA #$16
	STA $B800
	LDA #$0B
	STA $B000
	PLA
	RTS
:2400:	PHA
	LDA #$00
	STA $A800
	LDA #$1A
	STA $B800
	LDA #$0B
	STA $B000
	PLA
	RTS
:4800:	PHA
	LDA #$00
	STA $A800
	LDA #$1C
	STA $B800
	LDA #$0B
	STA $B000
	PLA
	RTS
:START ADDRESS: $1100
:DATA2:
$38
$44
$74
$54
$74
$04
$78
$00
$38
$44
$44
$7C
$44
$44
$44
$00
$3C
$48
$48
$38
$48
$48
$3C
$00
$38
$44
$04
$04
$04
$44
$38
$00
$3C
$48
$48
$48
$48
$48
$3C
$00
$7C
$04
$04
$1C
$04
$04
$7C
$00
$7C
$04
$04
$1C
$04
$04
$04
$00
$38
$44
$04
$04
$74
$44
$78
$00
$44
$44
$44
$7C
$44
$44
$44
$00
$38
$10
$10
$10
$10
$10
$38
$00
$70
$20
$20
$20
$20
$24
$18
$00
$44
$24
$14
$0C
$14
$24
$44
$00
$04
$04
$04
$04
$04
$04
$7C
$00
$44
$6C
$54
$54
$44
$44
$44
$00
$44
$44
$4C
$54
$64
$44
$44
$00
$38
$44
$44
$44
$44
$44
$38
$00
$3C
$44
$44
$3C
$04
$04
$04
$00
$38
$44
$44
$44
$54
$24
$58
$00
$3C
$44
$44
$3C
$14
$24
$44
$00
$38
$44
$08
$10
$20
$44
$38
$00
$7C
$10
$10
$10
$10
$10
$10
$00
$44
$44
$44
$44
$44
$44
$38
$00
$44
$44
$44
$44
$44
$28
$10
$00
$44
$44
$44
$54
$54
$54
$28
$00
$44
$44
$28
$10
$28
$44
$44
$00
$44
$44
$44
$28
$10
$10
$10
$00
$7C
$40
$20
$10
$08
$04
$7C
$00
$06
$02
$02
$02
$02
$02
$02
$06
$00
$02
$04
$08
$10
$20
$40
$00
$60
$40
$40
$40
$40
$40
$40
$60
$10
$28
$44
$00
$00
$00
$00
$00
$38
$44
$74
$54
$74
$04
$78
$00
$06
$02
$02
$02
$02
$02
$02
$06
$00
$18
$20
$38
$24
$38
$00
$00
$04
$04
$1C
$24
$24
$1C
$00
$00
$00
$38
$04
$04
$04
$38
$00
$00
$20
$20
$38
$24
$24
$38
$00
$00
$00
$18
$24
$1C
$04
$18
$00
$00
$10
$28
$08
$1C
$08
$08
$08
$00
$00
$38
$24
$24
$38
$20
$18
$00
$04
$04
$1C
$24
$24
$24
$00
$00
$10
$00
$18
$10
$10
$38
$00
$00
$10
$00
$18
$10
$10
$14
$08
$00
$04
$04
$14
$0C
$14
$24
$00
$00
$18
$10
$10
$10
$10
$38
$00
$00
$00
$2C
$54
$54
$54
$54
$00
$00
$00
$1C
$24
$24
$24
$24
$00
$00
$00
$18
$24
$24
$24
$18
$00
$00
$00
$1C
$24
$24
$1C
$04
$04
$00
$00
$1C
$12
$12
$1C
$10
$78
$00
$00
$34
$0C
$04
$04
$04
$00
$00
$00
$38
$04
$18
$20
$1C
$00
$00
$10
$38
$10
$10
$10
$20
$00
$00
$00
$24
$24
$24
$24
$38
$00
$00
$00
$44
$44
$44
$28
$10
$00
$00
$00
$44
$44
$54
$54
$28
$00
$00
$00
$44
$28
$10
$28
$44
$00
$00
$00
$24
$24
$24
$38
$20
$18
$00
$00
$3C
$20
$10
$08
$3C
$00
$00
$10
$08
$08
$04
$08
$08
$10
$00
$08
$08
$08
$08
$08
$08
$08
$00
$08
$10
$10
$20
$10
$10
$08
$00
$00
$00
$24
$1A
$00
$00
$00
$00
$00
$00
$00
$00
$00
$00
$00
$00
:END DATA2:
